.PHONY: src/all src/clean src/depclean src/install

src/all: $(LIBRUMINATE)

src/clean:
	$(RM) $(SRC_OBJECTS) $(LIBRUMINATE) $(SRC_PKG_CONFIG_FILES)

src/depclean:
	$(RM) $(SRC_DEPS)

src/install: $(SRC_PKG_CONFIG_FILES) $(LIBRUMINATE)
	$(INSTALL) -d $(PREFIX)/lib
	$(INSTALL) $(LIBRUMINATE) $(PREFIX)/lib
	$(INSTALL) -d $(PREFIX)/lib/pkgconfig
	$(INSTALL) $(SRC_PKG_CONFIG_FILES) $(PREFIX)/lib/pkgconfig

$(LIBRUMINATE): $(SRC_OBJECTS) $(ICE_OBJECTS)
$(LIBRUMINATE): SO_OBJECTS := $(SRC_OBJECTS) $(ICE_OBJECTS)
$(LIBRUMINATE): FLAGS_LINKER := $(SRC_FLAGS_LINKER) $(FLAGS_LINKER)

$(SRC_OBJECTS): FLAGS_PREPROC_AND_COMPILER_C := $(SRC_FLAGS_PREPROC_AND_COMPILER_C) $(FLAGS_PREPROC_AND_COMPILER_C)
$(SRC_OBJECTS): FLAGS_PREPROC_AND_COMPILER_CXX := $(SRC_FLAGS_PREPROC_AND_COMPILER_CXX) $(FLAGS_PREPROC_AND_COMPILER_CXX)

$(SRC_DEPS): $(ICE_HEADERS)

-include $(SRC_DEPS)
